# Copyright 2005 The Trustees of Indiana University.

# Use, modification and distribution is subject to the Boost Software
# License, Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
# http://www.boost.org/LICENSE_1_0.txt)

#  Authors: Douglas Gregor
#           Andrew Lumsdaine

# This file builds the Python bindings for the Boost Graph Library.

subproject build ;

import python ;

extension _support 
:   # Sources 
    ../src/support.cpp
    # Depend on the Boost Python library
    <template>@boost/libs/python/build/extension
    : # Requirements
    <include>$(BGL_PYTHON_ROOT)
    ;

extension _graph
        : # Sources
        ../src/module.cpp
        # Graph types
        ../src/basic_graph.cpp
        ../src/graphdocs.cpp
        ../src/properties.cpp
        ../src/directed_properties.cpp
        # Algorithms
        ../src/bellman_ford_shortest_paths.cpp
        ../src/betweenness_centrality.cpp
        ../src/biconnected_components.cpp
        ../src/breadth_first_search.cpp
        ../src/circle_layout.cpp
        ../src/connected_components.cpp
        ../src/cuthill_mckee_ordering.cpp
        ../src/dag_shortest_paths.cpp
        ../src/depth_first_search.cpp
        ../src/dijkstra_shortest_paths.cpp
        ../src/fruchterman_reingold.cpp
        ../src/isomorphism.cpp
        ../src/kamada_kawai_spring_layout.cpp
        ../src/king_ordering.cpp
        ../src/kruskal_min_spanning_tree.cpp
        ../src/minimum_degree_ordering.cpp
        ../src/page_rank.cpp
        ../src/prim_minimum_spanning_tree.cpp
        ../src/sequential_vertex_coloring.cpp
        ../src/strong_components.cpp
        ../src/topological_sort.cpp
        ../src/transitive_closure.cpp
        # Graph generators
        ../src/generators.cpp
        # Graph I/O
        ../src/graphviz.cpp
        ../src/pickle.cpp
        # Depend on the Boost Python library
        <template>@boost/libs/python/build/extension
        # Depend on the bgl-viz library for GraphViz support
        <lib>@boost/libs/graph/build/bgl-viz
        : # Requirements
        <include>$(BGL_PYTHON_ROOT)
        ;

install _support pyd 
        : <pyd>_support
          <dll>@boost/libs/python/build/boost_python
        ;

install _graph pyd 
        : <pyd>_graph
          <dll>@boost/libs/python/build/boost_python
        ;

stage ../python/boost/graph : <pyd>_support
    :
     # add this target to the "stage" and "all" pseudo-targets:
       <target>stage
       <target>all
    :
       release
    ;

stage ../python/boost/graph : <pyd>_graph
    :
     # add this target to the "stage" and "all" pseudo-targets:
       <target>stage
       <target>all
    :
       release
    ;

stage ../python : <dll>@boost/libs/python/build/boost_python
    :
     # add this target to the "stage" and "all" pseudo-targets:
       <target>stage
       <target>all
    :
       release
    ;
